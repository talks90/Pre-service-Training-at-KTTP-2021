#CCNA 

# 速記

OSPF - 開放最短路徑優先，用來替代 RIP
用成本作為度量的協定
IPv4 用 OSPFv2
IPv6 用 OSPFv3
OSPF 的管理距離是 110

# OSPF 的組成
## 資料結構
- 鄰居表

## 路由協定訊息
## 演算法


AD - 管理距離，用來表示路由來源的可信度，也就是優先程度

8.2.1.2
會給他一個 process-id
設多少沒關係，但習慣會設相同
其意義在進階課程

這個程序，ccna 必考
選舉 DR 靠路由器 ID 來決定
設 ospf 時儘量指定 router-id
未設定時，會從最大的 lookback interface 選
如果再沒有，會從實體介面裡最大的選

類似 ip，但不可以拿來路由

檢查動態路由
`show ip protocols`
顯示特定區域
`show ip protocols | section Router ID`

建網路時
1. 先設 router id
2. **network** *network-address wildcard-mask* **area** *area-id*

8.2.2.3
萬用遮罩
比較容易計算網路位置
```
	255.255.255.255
-	255.255.255.255
--------------------
	
```

通告時只需要通告網段內，連到外部網路可以不用通告

練習 8.2.2.3 第 3 個分頁

8.2.2.4
為了安全，不主動發送 ospf 通告
設為 passive-interface
設了以後，會造成路由建立不起來

練習 8.2.2.6
養成習慣，修改完設定之後要存檔

`show ip route`
ospf 開頭是 o \[xx/yy\] xx  AD 值 yy 度量值

8.2.2.3
成本 = 參考頻寬 / 介面頻寬

預設參考頻寬 BW 是 100 MB 10^8

大於 100MB 時，就會造成走 GB 跟走 MB 是相同的
所以要改預設參考頻寬

serial 預設是 1544k

設 BW 路由器需要從頻寬再回推成本值
會造成路由器的計算負擔
可以直接設定成本值

`show ip ospf neighbor`
`show ip ospf` - 內容是屬於 CCNP 才會用到
`show ip ospf interface brief`

OSPFv3
只有多區域
路由器 ID 還是使用 32 位元的格式，要記得同時設定 router-id 否則會造成無法使用

8.3.1.3 OSPFv2 vs. OSPFv3

OSPFv3 通告網路要設在介面上
單點傳送預設關閉

練習 8.3.1.5

操作到 IPv6 時，記得就直接設單點傳送路由 `ipv6 unicast-routing`
FE80 開頭，後面亂數，太多不好設
另外設 FE80 的 loopback address 代替，因為只有在本地跑，所以重複也沒關係
設完要 `clear ipv6 ospf process` 重新載入設定，否則需要重新開機設定才會生效

FF:FE 有做 修改

檢查
`show ipv6 ospf neighbor` 狀態應該要 FULL
`show ipv6 protocols` 看看介面有沒有漏

練習 8.3.3.5, 8.4.1.2

下午第 9 章 ACL 必考單元

ACL 存取控制清單
可以控製流量

SW 第 2 層，沒有 ACL 的功能
9.1.1.2 常用連接埠要記

無線網路 - 1812 RADIUS

UDP
TFTP

TCP / UDP 通用的服務
53 DNS
161 網管監控
1433 MS SQL （考試不考，但實務上常遇到有攻擊，所以沒用建議關閉）

路由器只做路由，是第 3 層；如果做到封包過濾，就需要到第 4 層

ACL 有分入站跟出站
以路由器的角度來看
一般來說只會設一個方面，

ACL 有分標準跟延伸
最後會有隱藏 deny any
所以一定至少要有 1 個允許項目

標準 - 只能過濾來源

延伸 - 的過濾條件就可以支援很多項了
實務上用得比較多

萬用遮罩只有 2 個地方使用
- 路由宣告網段
- ACL

可以用編號，也可以用命名
標準的編號範圍 1-99，1300-1999（考試只會考到 1-99）
延伸的編號範圍 100-199, 2000-2699

命名
建議用大寫
不能有空白或標點符號

`access-list 1 permit 0.0.0.0 255.255.255.255` = `access-list 1 permit any`
`access-list 1 permit 192.168.10.10 0.0.0.0` = `access-list 1 permit host 192.168.10.10`

練習 9.1.3.6
9.1.3.7
ACL 設定時，CISCO 可以允許設 IP 位址，由機器來做換算
所以看 ACL 設定時要注意一下是網路位址還是 IP 地址

3 P 原則
per Interface, per Direction, per Protocols
每個介面，每個方向，每種協定

安全政策要經過組織開會通過公告，不是網管自己愛設怎麼就設怎樣
記下 ACL 要達成的目的
最好用文字編輯器修改編
先在測試環境做好測試再到實際網路

練習 9.1.4.3

放置原則
延伸 ACL 儘速靠近來源端，標準 ACL 儘速靠近目的端

條件是逐條判斷，只要符合就跳脫
所以範圍小往前放，範圍大往後放，才不會發生規則碰撞

remark 加註解
log 符合條件的加入 log 檔

9.2.1.6 做過濾特定 IP 時使用

練習 9.2.1.9, 9.2.1.10, 9.2.1.11

9.2.2.1
規則可能會有 2x 幾條
所以可以利用文字編輯器來修改後再回傳

用命名的，可以編號，編號時不要用連續數字，預留彈性

可以讓 cisco 依規則範圍大小自動重排， reload 之後把序號也重排

延伸
`established` 由內部建立的連線，傳送回來的資料可以過

練習 9.3.2.7

下次上課從 9.4 開始