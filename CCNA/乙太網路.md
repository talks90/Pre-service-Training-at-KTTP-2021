#CCNA

# 乙太網路協定

  ![](../img/Pasted%20image%2020201026092436.png)
乙太網路由資料鏈結層和實體層組合
 ![](../img/Pasted%20image%2020201026092625.png)

資料鏈結層可分為2層：
- LLC 子層：處理上（網路）層和下（實體）層的通訊
- [[CCNA/MAC]] 子層：控制下層介面，做轉換的動作

## 媒體存取控制
採競爭存取的方式，但用在不同地方有不同機制
- 乙太網路：CSMA/CD
- 802.11無線網路：CSMA/CA

為什麼有線、無線要採用不同的處理機制呢？因為有線的實體連線就一直連線，發生碰撞了就再處理就好，所以可以用CSMA/CD；但與有線相比，無線的傳輸成本比較高，所以就不能讓它發生碰撞，因此用CSMA/CA。

## 乙太網路訊框大小
![](../img/Pasted%20image%2020201026091943.png)VLAN ID 的範圍： 2^12次方

## 訊框各欄位用途
- 前序編碼 (7bits): 告訴目的裝置準備收新訊框囉~~
![](../img/Pasted%20image%2020201026094029.png)
- 訊框標頭分隔字元 (SFD，又稱訊框開始) (1bits): 同步發送裝置和接收裝置
![](../img/Pasted%20image%2020201026094016.png)
- 目地位址 (6bits)
![](../img/Pasted%20image%2020201026093959.png)
- 來源位址 (6bits)
![](../img/Pasted%20image%2020201026093949.png)
- 長度 (2bits)
![](../img/Pasted%20image%2020201026093936.png)
- 資料 (46 - 1500bits)
![](../img/Pasted%20image%2020201026093925.png)
- 訊框檢查序列 (FCS, CRC 總和檢查碼) (4bits)
![](../img/Pasted%20image%2020201026093908.png)

## 傳送的情境
- 單點傳送：就是 1 對 1 的傳送方式
- 廣播：目的 MAC 為 FF-FF-FF-FF-FF-FF
![](../img/Pasted%20image%2020201026095928.png)
- 多點傳送：當然就是 1 對多的傳送方式囉~~
可以透過群組的方式，把封包群發給區域網路內的特定電腦
目的 MAC 欄會填入 1 組 01-00-5E 開頭的地址給 switch ，由 switch 來轉發給群組的電腦
![](../img/Pasted%20image%2020201026100114.png)
IPv4 的多點傳送的位址範圍為 224.0.0.0 到 239.255.255.255

### 封包的傳送
**發封包時是依據目的 [IP]  來決定發到哪裡，但要怎麼知道目的地電腦的 IP 呢？**

最常用的方法是透過 DNS （網域名稱服務）來取得，再透過路由器來決定把封包送到目地 IP 的最佳路徑

而中間可能會經過很多不同的媒介，如乙太網路。傳遞封包的過程，只在 L2 依據 MAC 位址來處理訊框的作業，不去處理 IP；也就是說，**訊框在封包的傳遞過程中，其內容會因為傳遞的媒介不同，而不斷的被變更，但 IP 不會被變動**

封包要發送的時候，我們同時要知道到 MAC 及 IP 位址，但通常一開始的時候，我只知道 IP ，就不知道 MAC 呀，怎辦？！這時候就是 [ARP] （位址解析協定） 帥氣登場的時候囉！ ARP 會負責取得目的位址的 IP 並告訴我們的電腦，讓封包可以順利傳送出去

# 網路設備 - [[CCNA/交換器]]

# 結論
這章的重點，就是要搞清楚訊框的組成，以及封包在傳送時，怎麼依據來源及目的 MAC, IP 來做傳送