# 路由表的內容
## 路由器介面

## 直通路由
- 來自路由器的介面，當在介面設定了 IP 位址並啟用時，路由器就會增加直連路由
- 是存在 RAM 中的資料檔案

## 遠端路由
- 來自連接其他路由器的遠端網路，路由取得的方式可以是靜態設定，也可以是由動態路由協定獲得

遠端路由紀錄![](../img/Pasted%20image%2020201028133028.png)

欄位 | 說明
:---: | :---:
**路由來源** |
**目的網路** |
**管理距離** | 表示路由來源的可信度，管理距離小優先
**度量** | 為目的網段所分配的值，越小表示這個路由越佳
**下一跳** | 下一個要處理封包的設備的位址（也就是通到遠端網路的閘道）
**路由時間戳記** | 距離上一次用這個路由後，過了多久
**輸出介面** |

### 本機路由表
在 Windows 主機，可以用` netstat -r `或` route print `來檢視本機的路由表

本機路由表分為 3 個部分
- **介面清單**![](../img/Pasted%20image%2020201028125354.png)
- **IPv4 路由表**![](../img/Pasted%20image%2020201028125424.png)
> **計量**的意思是各個路由的成本，用來確定到達目的網路的最佳路由；越小越好

![](../img/Pasted%20image%2020201028110156.png)


**0.0.0.0** 本地預設路由：如果路由表內的所有路徑都不符合時，就走本地預設路由；netmask24 表示就是該 IP 本身
**127.0.0.0 - 127.255.255.255** 測試用線路
192.168.10.0 - 192.168.10.255 區網相關位址
**192.168.10.0** 網段的位址，代表網段裡的所有電腦
**192.168.10.10** 本機的位址
**192.168.10.255** 區網的廣播位址
**224.0.0.0** 留作迴路介面 (127.0.0.1) 或主機 IP 位址 (192.168.10.10) 的 D 級別專用多點傳送位址
 **255.255.255.255** 最後兩個位址表示用於迴路介面 (127.0.0.1) 或主機 IP 位址 (192.168.10.10) 的廣播位址；不確定本地 IP 時要找 DHCP 伺服器可以用到

- **IPv6 路由表**![](../img/Pasted%20image%2020201028125451.png)

![](../img/Pasted%20image%2020201028112813.png)

**::/0** 本地預設路由
**::1/128** 迴路位址，相當於 127.0.0.0
**2001::/32** 全域單點傳送網路前置碼
**2001:0:9d38:953c:2c30:3071:e718:a926/128** 本機的的全域單點傳送 IPv6 位址
**fe80::/64** 網段的位址
**fe80::2c30:3071:e718:a926/128** 區網的廣播位址
**ff00::/8** 專門留給 D 級別多點傳送的位址，相當於 224.x.x.x

> 注意：IPv6 介面通常會有 2 個 IPv6 位址：一個鏈路本地位址和一個全域單點傳送位址；另外，IPv6 沒有廣播位址


### 路由器路由表
在 Cisco IOS 路由器上，用`show ip route`來檢視路由器的路由表

![](../img/Pasted%20image%2020201028124623.png)
路由器的路由表裡的資訊分 2 種類型
- **直連路由** - 直接連接在路由器介面的網段
在路由器介面上設定 IP 及遮罩之後，會自動在路由表裡加上 2 條訊息![](../img/Pasted%20image%2020201028131524.png)
	- A 路由來源
		- **C** - 表示直連網路，是在設完介面 IP 並啟用後就自動新增的
		- **L** - 表示網段的路由（路由器介面的 IP），是在設完介面 IP 並啟用後就自動新增的
		- **S** - 由管理者手動新增通往特定網路的路由，是一種靜態路由
		- **D** - 表示是由增強型內部閘道路由協定 (EIGRP) 從 B 路由器動態取得的路由
		- **O** - 表示是由開放式最短路徑優先 (OSPF) 路由協定動態取得的路由
	- B 目的網路 - 用來記錄遠端網路的位址
	- C 輸出介面 - 用來記錄封包要轉送時使用的介面




#### 路由器的封包轉送決策
1. 當路由器收到 A 主機的封包要轉發給 B 主機時，會先檢查封包的標頭，確定目的網路是哪裡
2. 如果路由表裡有目的網路的資料，就依照路由表的資料轉送封包
3. 如果路由表裡有 2 筆以上目的網路的資料，就依照「計量（又稱度量）」的值來決定封包的最佳路徑
4. 如果路由表裡找不到資料，就把封包丟掉；但也可以設定最後選用閘道，把未知目的的封包通通轉過去
